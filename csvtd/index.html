<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>CsvTicFactory - Ticdat</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "CsvTicFactory";
        var mkdocs_page_input_path = "csvtd.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Ticdat
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">pandatfactory.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatfactory/">PanDatFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pandatio.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">CsvPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">JsonPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">SqlPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">XlsPanFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ticdatfactory.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ticdatfactory/">TicDatFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">csvtd.py</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">CsvTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">jsontd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../jsontd/">JsonTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">mdb.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../mdb/">MdbTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pgtd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pgtd/">PostgresPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pgtd/">PostgresTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">sqlitetd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../sqlitetd/">SQLiteTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">xls.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../xls/">XlsTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">utils.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/">Utilities</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">model.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../model/">Model</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">opl.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../opl/">OPL</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Ticdat</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>csvtd.py &raquo;</li>
      <li class="breadcrumb-item active">CsvTicFactory</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ticdat/ticdat/edit/master/docs/csvtd.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ticdat.csvtd.CsvTicFactory">CsvTicFactory</h1>

<pre><code class="language-python">CsvTicFactory(self, tic_dat_factory)
</code></pre>
<p>Primary class for reading/writing csv files with TicDat objects.
Your system will need the csv package if you want to use this class.
Don't create this object explicitly. A CsvTicFactory will
automatically be associated with the csv attribute of the parent</p>
<h2 id="ticdat.csvtd.CsvTicFactory.create_tic_dat">create_tic_dat</h2>

<pre><code class="language-python">CsvTicFactory.create_tic_dat(dir_path,
                             dialect='excel',
                             headers_present=True,
                             freeze_it=False,
                             encoding=None)
</code></pre>
<p>Create a TicDat object from the csv files in a directory</p>
<p>:param dir_path: the directory containing the .csv files.</p>
<p>:param dialect: the csv dialect. Consult csv documentation for details.</p>
<p>:param headers_present: Boolean. Does the first row of data contain the
                        column headers?</p>
<p>:param encoding: see docstring for the Python.open function</p>
<p>:param freeze_it: boolean. should the returned object be frozen?</p>
<p>:return: a TicDat object populated by the matching files.</p>
<p>caveats: Missing files resolve to an empty table, but missing fields on
         matching files throw an Exception.
         By default, data field values (but not primary key values) will be coerced into floats if possible.
         This includes coercing "inf" and "-inf" into +/- float("inf")
         The rules over which fields are/are-not coerced can be controlled  via hints from the default values
         or data types. Default values and data types can also be used to control whether or not the empty
         string should be coerced into None.
         The infinity_io_flag rules are applied subsequent to this coercion.</p>
<p>Note - pandas doesn't really do a fantastic job handling date types either, since it coerces all columns
to be the same type. If that's the behavior you want you can use PanDatFactory.</p>
<p>JSON is just a better file format than csv for a variety of reasons, to include typing of data.</p>
<h2 id="ticdat.csvtd.CsvTicFactory.find_duplicates">find_duplicates</h2>

<pre><code class="language-python">CsvTicFactory.find_duplicates(dir_path,
                              dialect='excel',
                              headers_present=True,
                              encoding=None)
</code></pre>
<p>Find the row counts for duplicated rows.</p>
<p>:param dir_path: the directory containing .csv files.</p>
<p>:param dialect: the csv dialect. Consult csv documentation for details.</p>
<p>:param headers_present: Boolean. Does the first row of data contain
                        the column headers?</p>
<p>:param encoding: see docstring for the Python.open function</p>
<p>:return: A dictionary whose keys are the table names for the primary key tables.
         Each value of the return dictionary is itself a dictionary.
         The inner dictionary is keyed by the primary key values encountered
         in the table, and the value is the count of records in the
         Excel sheet with this primary key.
         Row counts smaller than 2 are pruned off, as they aren't duplicates</p>
<p>caveats: Missing files resolve to an empty table, but missing fields (data or primary key) on
         matching files throw an Exception.</p>
<h2 id="ticdat.csvtd.CsvTicFactory.write_directory">write_directory</h2>

<pre><code class="language-python">CsvTicFactory.write_directory(tic_dat,
                              dir_path,
                              allow_overwrite=False,
                              dialect='excel',
                              write_header=True,
                              case_space_table_names=False)
</code></pre>
<p>write the ticDat data to a collection of csv files</p>
<p>:param tic_dat: the data object</p>
<p>:param dir_path: the directory in which to write the csv files</p>
<p>:param allow_overwrite: boolean - are we allowed to overwrite existing
                        files?</p>
<p>:param dialect: the csv dialect. Consult csv documentation for details.</p>
<p>:param write_header: Boolean. Should the header information be written
                     as the first row?</p>
<p>:param case_space_table_names: boolean - make best guesses how to add spaces and upper case
                               characters to table names</p>
<p>:return:</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ticdatfactory/" class="btn btn-neutral float-left" title="TicDatFactory"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../jsontd/" class="btn btn-neutral float-right" title="JsonTicFactory">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ticdat/ticdat" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../ticdatfactory/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../jsontd/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
