<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Utilities - Ticdat</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Utilities";
        var mkdocs_page_input_path = "utils.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Ticdat
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">pandatfactory.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatfactory/">PanDatFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pandatio.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">CsvPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">JsonPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">SqlPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pandatio/">XlsPanFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ticdatfactory.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ticdatfactory/">TicDatFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">csvtd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../csvtd/">CsvTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">jsontd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../jsontd/">JsonTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">mdb.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../mdb/">MdbTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pgtd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pgtd/">PostgresPanFactory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pgtd/">PostgresTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">sqlitetd.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../sqlitetd/">SQLiteTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">xls.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../xls/">XlsTicFactory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">utils.py</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Utilities</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">model.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../model/">Model</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">opl.py</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../opl/">OPL</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Ticdat</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>utils.py &raquo;</li>
      <li class="breadcrumb-item active">Utilities</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ticdat/ticdat/edit/master/docs/utils.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ticdat.utils.standard_main">standard_main</h1>

<pre><code class="language-python">standard_main(input_schema,
              solution_schema,
              solve,
              case_space_table_names=False)
</code></pre>
<p>provides standardized command line functionality for a ticdat solve engine</p>
<p>:param input_schema: a TicDatFactory or PanDatFactory defining the input schema</p>
<p>:param solution_schema: a TicDatFactory or PanDatFactory defining the output schema</p>
<p>:param solve: a function that takes a input_schema.TicDat object and
             returns a solution_schema.TicDat object</p>
<p>:param case_space_table_names - passed through to any TicDatFactory/PanDatFactory write functions that have
                               case_space_table_names as an argument. Will also pass through to
                               case_space_sheet_names for Excel writers.
                               boolean - make best guesses how to add spaces and upper case characters to
                               table names when writing to the file system.</p>
<p>:return: None</p>
<p>Implements a command line signature of</p>
<p>"python engine_file.py --input <input_file_or_dir> --output <output_file_or_dir> --foresta <Foresta config file>
                      --errors <error_file_or_dir>"</p>
<p>For the input/output command line arguments.</p>
<p>--&gt; endings in ".xls" or ".xlsx" imply reading/writing Excel files</p>
<p>--&gt; endings in ".mdb" or ".accdb" imply reading/writing Access files (TicDatFactory only)</p>
<p>--&gt; ending in ".db" imply reading/writing SQLite database files</p>
<p>--&gt; ending in ".sql" imply reading/writing SQLite text files rendered in
   schema-less SQL statements (TicDatFactory only)</p>
<p>--&gt; ending in ".json" imply reading/writing .json files</p>
<p>--&gt; otherwise, the assumption is that an input/output directory is being specified,
   which will be used for reading/writing .csv files.
   (Recall that .csv format is implemented as one-csv-file-per-table, so an entire
   model will be stored in a directory containing a series of .csv files)</p>
<p>Defaults are input.xlsx, output.xlsx</p>
<p>The Foresta config file is optional. See ticdat wiki for a description of the Foresta config file.</p>
<h1 id="ticdat.utils.verify">verify</h1>

<pre><code class="language-python">verify(b, msg)
</code></pre>
<p>raise a TicDatError exception if the boolean condition is False</p>
<p>:param b: boolean condition.</p>
<p>:param msg: string argument to the TicDatError construction</p>
<p>:return:</p>
<h1 id="ticdat.utils.gurobi_env">gurobi_env</h1>

<pre><code class="language-python">gurobi_env(*args, **kwargs)
</code></pre>
<p>Return an object that can be passed to gurobipy.Model() as the env argument.
On an ordinary Python installation, just returns None
Useful for Gurobi licensing/DRM issues.</p>
<p>:return: An object that can be passed to gurobipy.Model as the env argument</p>
<h1 id="ticdat.utils.ampl_format">ampl_format</h1>

<pre><code class="language-python">ampl_format(mod_str, **kwargs)
</code></pre>
<p>Return a formatted version of mod_str, using substitutions from kwargs.
The substitutions are identified by doubled-braces ('{{' and '}}').
Very similar to str.format, except single braces are left unmolested and double-braces
are used to identify substitutions. This allows AMPL mod code to be more readable
to AMPL developers.</p>
<p>:param mod_str: the string that has doubled-braced substitutions entries.</p>
<p>:param kwargs: Named arguments map from substitution-entry label to value.</p>
<p>:return: A copy of mod_str with the substitutions performed.</p>
<h1 id="ticdat.utils.Slicer">Slicer</h1>

<pre><code class="language-python">Slicer(self, iter_of_iters)
</code></pre>
<p>Object to perform multi-index slicing over an index sequence</p>
<h2 id="ticdat.utils.Slicer.slice">slice</h2>

<pre><code class="language-python">Slicer.slice(*args)
</code></pre>
<p>Perform a multi-index slice. (Not to be confused with the native Python slice)
:param <em>args a series of index values or '</em>'. The latter means 'match every value'
:return: a list of tuples which match  args.
:caveat will run faster if gurobipy is available and tuplelist can accommodate the interior iterables</p>
<h2 id="ticdat.utils.Slicer.clear">clear</h2>

<pre><code class="language-python">Slicer.clear()
</code></pre>
<p>reduce memory overheard by clearing out any archived slicing.
this is a no-op if gurobipy is available
:return:</p>
<h1 id="ticdat.utils.Sloc">Sloc</h1>

<pre><code class="language-python">Sloc(self, s)
</code></pre>
<p>A utility class for the slicing on pandas Series.
Works just like .loc, except doesn't exception out when
encountering an empty slice.
<strong>All</strong> credit for this class goes to the inimitable IL.
https://github.com/pydata/pandas/issues/10695</p>
<h2 id="ticdat.utils.Sloc.add_sloc">add_sloc</h2>

<pre><code class="language-python">Sloc.add_sloc(s)
</code></pre>
<p>adds an .sloc attribute to a the series or to every column of the data frame
:param s: either a series or a data frame
:return: s if .sloc could be added, None otherwise</p>
<h1 id="ticdat.utils.LogFile">LogFile</h1>

<pre><code class="language-python">LogFile(self, path)
</code></pre>
<p>Utility class for writing log files.
Also enables writing on-the-fly tables into log files.</p>
<h2 id="ticdat.utils.LogFile.log_table">log_table</h2>

<pre><code class="language-python">LogFile.log_table(table_name,
                  seq,
                  formatter=&lt;function LogFile.&lt;lambda&gt; at 0x132428820&gt;,
                  max_write=10)
</code></pre>
<p>Writes a table to the log file. Extremely useful functionality for
on the fly errors, warnings and diagnostics.
:param log_table : the name to be given to the logged table
:param seq: An iterable of iterables. The first iterable
            lists the field names for the table. The remaining iterables
            list the column values for each row. The outer iterable
            is thus of length num_rows + 1, while each of the inner
            iterables are of length num_cols.
:param formatter: a function used to turn column entries into strings
:param max_write: the maximum number of table entries to write
                  to the actual log file.
:return:</p>
<h1 id="ticdat.utils.Progress">Progress</h1>

<pre><code class="language-python">Progress(self, quiet=False)
</code></pre>
<p>Utility class for indicating progress.</p>
<h2 id="ticdat.utils.Progress.numerical_progress">numerical_progress</h2>

<pre><code class="language-python">Progress.numerical_progress(theme, progress)
</code></pre>
<p>indicate generic progress
:param theme: string describing the type of progress being advanced
:param progress: numerical indicator to the degree of progress advanced
:return: False if GUI indicates solve should gracefully finish, True otherwise</p>
<h2 id="ticdat.utils.Progress.mip_progress">mip_progress</h2>

<pre><code class="language-python">Progress.mip_progress(theme, lower_bound, upper_bound)
</code></pre>
<p>indicate progress towards solving a MIP via converging upper and lower bounds
:param theme: string describing the type of MIP solve underway
:param lower_bound: the best current lower bound to the MIP objective
:param upper_bound: the best current upper bound to the MIP objective
:return: False if GUI indicates solve should gracefully finish, True otherwise</p>
<h2 id="ticdat.utils.Progress.gurobi_call_back_factory">gurobi_call_back_factory</h2>

<pre><code class="language-python">Progress.gurobi_call_back_factory(theme, model)
</code></pre>
<p>Allow a Gurobi  model to call mip_progress. <strong>Only for minimize</strong>
:param theme: string describing the type of MIP solve underway
:param model: a Gurobi model (or ticdat.Model.core_model)
:return: a call_back function that can be passed to Model.optimize</p>
<h2 id="ticdat.utils.Progress.add_cplex_listener">add_cplex_listener</h2>

<pre><code class="language-python">Progress.add_cplex_listener(theme, model)
</code></pre>
<p>Allow a CPLEX model to call mip_progress. <strong>Only for minimize</strong>
:param theme: short descriptive string
:param model: cplex.Model object (or ticdat.Model.core_model)
:return:</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../xls/" class="btn btn-neutral float-left" title="XlsTicFactory"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../model/" class="btn btn-neutral float-right" title="Model">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ticdat/ticdat" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../xls/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../model/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
